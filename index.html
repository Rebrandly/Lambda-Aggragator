<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
	<head>
		<title>
			Waerl
		</title>
		
		<style>
			.node {
				line-height:30px;
				padding:4px;
			}
			.finished {
				background-color:#A6FF71;
			}
			.failed {
				background-color:#FF7373;
			}
			.other {
				background-color:#FFEE71;
			}
		</style>
		
		<script src="js/plugin/jquery-2.1.3.min.js"></script>
		
		<script>
			function DFS(v, tab) {
				tab = tab || "";
			
				if (v.failed) {
					var name = "<span class='node failed'>" + v.name + "</span>";
				} else if (v.finished) {
					var name = "<span class='node finished'>" + v.name + "</span>";
				} else {
					var name = "<span class='node other'>" + v.name + "</span>";
				}
				
				$("#data").append(tab + name + "<br/>");
				
				var children = v.children, l = children.length, i;
				
				for (i=0; i<l; i+=1) {
					DFS(children[i], tab + "----");
				}
			}
		
			$(document).ready(function() {
				$.ajax({
					type: 'GET',
					dataType: 'json',
					url: "http://127.0.0.1:8000/",
					data: {

					},
					timeout: 10 * 1000,
					beforeSend: function( xhr ) {
	
					},
					success: function(jsonData,status,xhr) {
						$("#downloadcount").text("Download Count: " + jsonData.downloadCount);
						$("#duration").text("Milliseconds: " + jsonData.duration);
						
						DFS(jsonData.data);
					},
					error: function(data,status,xhr) {
						alert(xhr);
					}
				});
			});
		</script>
	</head>
	<body>

		<h3>Current Processed Tree:</h3>
		
		<div id="downloadcount"></div>
		<div id="duration"></div>
		
		<br/>
		
		<div id="data"></div>

	</body>
</html>